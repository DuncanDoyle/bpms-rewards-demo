<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:g="http://www.jboss.org/drools/flow/gpd" xmlns:tns="http://www.jboss.org/drools" xmlns="http://www.jboss.org/drools" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd" id="Definition" expressionLanguage="http://www.mvel.org/2.0" targetNamespace="http://www.omg.org/bpmn20" typeLanguage="http://www.java.com/javaTypes">
  <bpmn2:itemDefinition id="_employeeItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_reasonItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_outcomeItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_explanationItem" structureRef="String"/>
  <bpmn2:process id="org.jbpm.approval.rewards" tns:version="1" tns:packageName="org.jbpm.rewards" tns:adHoc="false" name="Rewards Approval" isExecutable="true" processType="Private">
    <bpmn2:property id="employee" itemSubjectRef="_employeeItem"/>
    <bpmn2:property id="reason" itemSubjectRef="_reasonItem"/>
    <bpmn2:property id="outcome" itemSubjectRef="_outcomeItem"/>
    <bpmn2:property id="explanation" itemSubjectRef="_explanationItem"/>
    <bpmn2:startEvent id="_4C4653BD-908A-4B8C-B329-CB61EA65E662" name="Start">
      <bpmn2:outgoing>_4C4653BD-908A-4B8C-B329-CB61EA65E662-_E3F6B3CA-753F-46BB-A263-5341FFB27E8E</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:userTask id="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E" name="Approve Reward">
      <bpmn2:extensionElements>
        <tns:onEntry-script scriptFormat="http://www.java.com/java">
          <tns:script></tns:script>
        </tns:onEntry-script>
        <tns:onExit-script scriptFormat="http://www.java.com/java">
          <tns:script></tns:script>
        </tns:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_4C4653BD-908A-4B8C-B329-CB61EA65E662-_E3F6B3CA-753F-46BB-A263-5341FFB27E8E</bpmn2:incoming>
      <bpmn2:outgoing>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E-_7</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_1">
        <bpmn2:dataInput id="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_EmployeeInput" name="Employee"/>
        <bpmn2:dataInput id="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_ReasonInput" name="Reason"/>
        <bpmn2:dataInput id="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_CommentInput" name="Comment"/>
        <bpmn2:dataInput id="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_TaskNameInput" name="TaskName"/>
        <bpmn2:dataInput id="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_GroupIdInput" name="GroupId"/>
        <bpmn2:dataOutput id="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_ExplanationOutput" name="Explanation"/>
        <bpmn2:dataOutput id="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_OutcomeOutput" name="Outcome"/>
        <bpmn2:inputSet id="InputSet_1">
          <bpmn2:dataInputRefs>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_EmployeeInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_ReasonInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_CommentInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_TaskNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_GroupIdInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_1">
          <bpmn2:dataOutputRefs>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_ExplanationOutput</bpmn2:dataOutputRefs>
          <bpmn2:dataOutputRefs>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_OutcomeOutput</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_1">
        <bpmn2:sourceRef>employee</bpmn2:sourceRef>
        <bpmn2:targetRef>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_EmployeeInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_2">
        <bpmn2:sourceRef>reason</bpmn2:sourceRef>
        <bpmn2:targetRef>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_ReasonInput</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_3">
        <bpmn2:targetRef>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_CommentInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_1">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_1">You need to approve this reward.</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_2">_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_CommentInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_4">
        <bpmn2:targetRef>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_2">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_3">ApproveReward</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_4">_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_5">
        <bpmn2:targetRef>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_GroupIdInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_3">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_5">HR</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_6">_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_GroupIdInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="DataOutputAssociation_1">
        <bpmn2:sourceRef>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_ExplanationOutput</bpmn2:sourceRef>
        <bpmn2:targetRef>explanation</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:dataOutputAssociation id="DataOutputAssociation_2">
        <bpmn2:sourceRef>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E_OutcomeOutput</bpmn2:sourceRef>
        <bpmn2:targetRef>outcome</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:userTask>
    <bpmn2:exclusiveGateway id="_D93D5F2B-8CC0-471F-810C-11A9A97DB590" name="" gatewayDirection="Diverging">
      <bpmn2:incoming>_7-_D93D5F2B-8CC0-471F-810C-11A9A97DB590</bpmn2:incoming>
      <bpmn2:outgoing>_D93D5F2B-8CC0-471F-810C-11A9A97DB590-_F0B44D5C-BD35-4DA2-9A65-D5356580E060</bpmn2:outgoing>
      <bpmn2:outgoing>_D93D5F2B-8CC0-471F-810C-11A9A97DB590-_8</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_7" tns:taskName="Log" name="Log">
      <bpmn2:incoming>_E3F6B3CA-753F-46BB-A263-5341FFB27E8E-_7</bpmn2:incoming>
      <bpmn2:outgoing>_7-_D93D5F2B-8CC0-471F-810C-11A9A97DB590</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_2">
        <bpmn2:dataInput id="_7_MessageInput" name="Message"/>
        <bpmn2:dataInput id="_7_TaskNameInput" name="TaskName"/>
        <bpmn2:inputSet id="InputSet_2">
          <bpmn2:dataInputRefs>_7_MessageInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7_TaskNameInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_2"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_6">
        <bpmn2:targetRef>_7_MessageInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_4">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_7">Reward for #{employee}: Outcome is #{outcome}, Reason given is (#{reason}).</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_8">_7_MessageInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_7">
        <bpmn2:targetRef>_7_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_5">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_9">Log</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_10">_7_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:sequenceFlow id="_4C4653BD-908A-4B8C-B329-CB61EA65E662-_E3F6B3CA-753F-46BB-A263-5341FFB27E8E" tns:priority="1" sourceRef="_4C4653BD-908A-4B8C-B329-CB61EA65E662" targetRef="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E"/>
    <bpmn2:sequenceFlow id="_7-_D93D5F2B-8CC0-471F-810C-11A9A97DB590" tns:priority="1" sourceRef="_7" targetRef="_D93D5F2B-8CC0-471F-810C-11A9A97DB590"/>
    <bpmn2:sequenceFlow id="_D93D5F2B-8CC0-471F-810C-11A9A97DB590-_F0B44D5C-BD35-4DA2-9A65-D5356580E060" tns:priority="2" name="Rejected" sourceRef="_D93D5F2B-8CC0-471F-810C-11A9A97DB590" targetRef="_F0B44D5C-BD35-4DA2-9A65-D5356580E060">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_21" language="http://www.java.com/java">return true;</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E-_7" tns:priority="1" sourceRef="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E" targetRef="_7"/>
    <bpmn2:sequenceFlow id="_D93D5F2B-8CC0-471F-810C-11A9A97DB590-_8" tns:priority="1" name="Approved" sourceRef="_D93D5F2B-8CC0-471F-810C-11A9A97DB590" targetRef="_8">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="FormalExpression_22" language="http://www.java.com/java">return kcontext.getVariable(&quot;outcome&quot;).equals(&quot;Approved&quot;);</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:task id="_8" tns:taskName="Email" name="Email">
      <bpmn2:incoming>_D93D5F2B-8CC0-471F-810C-11A9A97DB590-_8</bpmn2:incoming>
      <bpmn2:outgoing>_8-_7F317A87-820C-449C-9205-7FE630D4A68C</bpmn2:outgoing>
      <bpmn2:ioSpecification id="InputOutputSpecification_3">
        <bpmn2:dataInput id="_8_BodyInput" name="Body"/>
        <bpmn2:dataInput id="_8_SubjectInput" name="Subject"/>
        <bpmn2:dataInput id="_8_ToInput" name="To"/>
        <bpmn2:dataInput id="_8_TaskNameInput" name="TaskName"/>
        <bpmn2:dataInput id="_8_FromInput" name="From"/>
        <bpmn2:inputSet id="InputSet_3">
          <bpmn2:dataInputRefs>_8_BodyInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_8_SubjectInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_8_ToInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_8_TaskNameInput</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_8_FromInput</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="OutputSet_3"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="DataInputAssociation_8">
        <bpmn2:targetRef>_8_BodyInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_6">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_11">Congratulations!</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_12">_8_BodyInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_9">
        <bpmn2:targetRef>_8_SubjectInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_7">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_13">You received a reward!</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_14">_8_SubjectInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_10">
        <bpmn2:targetRef>_8_ToInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_8">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_15">#{employee}@info.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_16">_8_ToInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_11">
        <bpmn2:targetRef>_8_TaskNameInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_9">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_17">Email</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_18">_8_TaskNameInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="DataInputAssociation_12">
        <bpmn2:targetRef>_8_FromInput</bpmn2:targetRef>
        <bpmn2:assignment id="Assignment_10">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="FormalExpression_19">rewards@info.com</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="FormalExpression_20">_8_FromInput</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:sequenceFlow id="_8-_7F317A87-820C-449C-9205-7FE630D4A68C" tns:priority="1" sourceRef="_8" targetRef="_7F317A87-820C-449C-9205-7FE630D4A68C"/>
    <bpmn2:endEvent id="_7F317A87-820C-449C-9205-7FE630D4A68C" name="End Approved">
      <bpmn2:incoming>_8-_7F317A87-820C-449C-9205-7FE630D4A68C</bpmn2:incoming>
      <bpmn2:terminateEventDefinition id="TerminateEventDefinition_2"/>
    </bpmn2:endEvent>
    <bpmn2:endEvent id="_F0B44D5C-BD35-4DA2-9A65-D5356580E060" name="End Rejected">
      <bpmn2:incoming>_D93D5F2B-8CC0-471F-810C-11A9A97DB590-_F0B44D5C-BD35-4DA2-9A65-D5356580E060</bpmn2:incoming>
      <bpmn2:terminateEventDefinition id="TerminateEventDefinition_1"/>
    </bpmn2:endEvent>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_Process_1" bpmnElement="org.jbpm.approval.rewards">
      <bpmndi:BPMNShape id="BPMNShape_StartEvent_1" bpmnElement="_4C4653BD-908A-4B8C-B329-CB61EA65E662">
        <dc:Bounds height="48.0" width="48.0" x="16.0" y="56.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_UserTask_1" bpmnElement="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E">
        <dc:Bounds height="61.0" width="135.0" x="96.0" y="50.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_ExclusiveGateway_1" bpmnElement="_D93D5F2B-8CC0-471F-810C-11A9A97DB590">
        <dc:Bounds height="48.0" width="48.0" x="395.0" y="56.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_1" bpmnElement="_F0B44D5C-BD35-4DA2-9A65-D5356580E060">
        <dc:Bounds height="48.0" width="48.0" x="614.0" y="56.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_EndEvent_2" bpmnElement="_7F317A87-820C-449C-9205-7FE630D4A68C">
        <dc:Bounds height="48.0" width="48.0" x="614.0" y="160.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_1" bpmnElement="_7">
        <dc:Bounds height="48.0" width="100.0" x="263.0" y="56.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_Task_2" bpmnElement="_8">
        <dc:Bounds height="48.0" width="161.0" x="350.0" y="160.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_1" bpmnElement="_4C4653BD-908A-4B8C-B329-CB61EA65E662-_E3F6B3CA-753F-46BB-A263-5341FFB27E8E">
        <di:waypoint xsi:type="dc:Point" x="40.0" y="80.0"/>
        <di:waypoint xsi:type="dc:Point" x="75.0" y="80.0"/>
        <di:waypoint xsi:type="dc:Point" x="163.0" y="80.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_2" bpmnElement="_7-_D93D5F2B-8CC0-471F-810C-11A9A97DB590">
        <di:waypoint xsi:type="dc:Point" x="313.0" y="80.0"/>
        <di:waypoint xsi:type="dc:Point" x="419.0" y="80.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_3" bpmnElement="_D93D5F2B-8CC0-471F-810C-11A9A97DB590-_F0B44D5C-BD35-4DA2-9A65-D5356580E060">
        <di:waypoint xsi:type="dc:Point" x="444.0" y="80.0"/>
        <di:waypoint xsi:type="dc:Point" x="520.0" y="80.0"/>
        <di:waypoint xsi:type="dc:Point" x="520.0" y="80.0"/>
        <di:waypoint xsi:type="dc:Point" x="614.0" y="80.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_4" bpmnElement="_8-_7F317A87-820C-449C-9205-7FE630D4A68C">
        <di:waypoint xsi:type="dc:Point" x="511.0" y="184.0"/>
        <di:waypoint xsi:type="dc:Point" x="557.0" y="184.0"/>
        <di:waypoint xsi:type="dc:Point" x="557.0" y="184.0"/>
        <di:waypoint xsi:type="dc:Point" x="614.0" y="184.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_5" bpmnElement="_E3F6B3CA-753F-46BB-A263-5341FFB27E8E-_7">
        <di:waypoint xsi:type="dc:Point" x="163.0" y="80.0"/>
        <di:waypoint xsi:type="dc:Point" x="313.0" y="80.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_6" bpmnElement="_D93D5F2B-8CC0-471F-810C-11A9A97DB590-_8">
        <di:waypoint xsi:type="dc:Point" x="419.0" y="105.0"/>
        <di:waypoint xsi:type="dc:Point" x="419.0" y="129.0"/>
        <di:waypoint xsi:type="dc:Point" x="430.0" y="129.0"/>
        <di:waypoint xsi:type="dc:Point" x="430.0" y="160.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>